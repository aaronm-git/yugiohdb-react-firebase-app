(this["webpackJsonpyugiohdb-react-firebase-app"]=this["webpackJsonpyugiohdb-react-firebase-app"]||[]).push([[0],{106:function(e,a,t){e.exports=t(139)},111:function(e,a,t){},112:function(e,a,t){},139:function(e,a,t){"use strict";t.r(a);var n=t(1),l=t.n(n),r=t(57),c=t.n(r),o=(t(111),t(104)),s=t(17),i=(t(112),t(23)),u=t(32),m=t(153),d=t(149),p=t(95),f=t(158),E=t(90),b=t.n(E),g=t(144),h=t(145),y=t(146),v=t(147),k=t(148),x=t(156),w=t(157),j=t(163),N=t(160),I=t(142),C=t(94),O=t(161),S=t(143),R=t(155),D=t(36),T=b()("A5JPX9U9RD","bffd80bc0030e6e51457ec77f6ff353c");function F(e){var a=e.location,t=e.selectThisCard,n=l.a.useState(0),r=Object(s.a)(n,2),c=r[0],o=(r[1],Object(g.a)((function(e){var a=e.currentRefinement,t=e.refine;return l.a.createElement("div",{className:"position-relative mb-4"},l.a.createElement(D.e,{className:"position-absolute text-secondary",style:{left:"0",margin:"1rem"}}),l.a.createElement(C.a,{id:"algolia-searchBox","aria-label":"Large",value:a,onChange:function(e){return t(e.currentTarget.value)},placeholder:"Search card by name",size:"lg",autoFocus:!0,style:{paddingLeft:"2.75rem"}}))}))),u=Object(h.a)((function(e){var a=e.hits;return l.a.createElement(I.a,null,a.map((function(e){return l.a.createElement(f.a,{key:e.objectID,className:"shadow-sm mb-3 mx-auto",style:{minWidth:"200px",maxWidth:"200px"}},l.a.createElement("div",{style:{height:"200px",backgroundImage:"url(".concat(e.imageURLs.full,"), url('https://storage.cloud.google.com/yugiohdb-app.appspot.com/cards/default.jpg')"),backgroundRepeat:"none",backgroundSize:"cover"}}),l.a.createElement(f.a.ImgOverlay,{className:"py-1 text-white",style:{backgroundColor:"rgba(0,0,0,0.5)",height:"2rem",top:"168px"}},l.a.createElement("div",null,e.atk||e.def?l.a.createElement("div",{className:"d-flex justify-content-between"},l.a.createElement("span",null,e.atk,"/",e.def),l.a.createElement("span",null,e.type.lvl2?e.type.lvl2.substring(e.type.lvl2.lastIndexOf(" ")):e.type.lvl0)):l.a.createElement("span",null,e.type.lvl0,"/",e.race))),l.a.createElement(f.a.Body,null,l.a.createElement(f.a.Title,null,l.a.createElement(i.b,{to:"/card/".concat(e.objectID),onClick:function(){return t(e)}},e.name))))})))})),m=Object(y.a)((function(e){var a=e.currentRefinement,t=e.nbPages,n=e.refine,r=[].concat([a-1>0?"First":null,a-1>0?"Prev":null,a-3>0?"...":null,a-2>0?a-2:null,a-1>0?a-1:null],[a],[a+1<=t?a+1:null,a+2<=t?a+2:null,a+3<=t?"...":null,a+1<=t?"Next":null,a+1<=t?"Last":null]).filter((function(e){return null!==e})),c=function(){return l.a.createElement(O.a,{size:"lg",className:"justify-content-center d-lg-none"},a-1>0?l.a.createElement(O.a.Item,{onClick:function(e){e.preventDefault(),n(a-1)}},l.a.createElement(D.c,null)):"",l.a.createElement(O.a.Item,{key:"algoliaPage-".concat(a,"-mobile"),active:!0},a),a+1<t?l.a.createElement(O.a.Item,{onClick:function(e){e.preventDefault(),n(a+1)}},l.a.createElement(D.d,null)):"")};return l.a.createElement(l.a.Fragment,null,l.a.createElement(O.a,{size:"lg",className:"justify-content-end d-none d-lg-flex"},r.map((function(e){var r,c;switch(e){case"First":r=1,c=l.a.createElement(D.a,null);break;case"Prev":r=a-1,c=l.a.createElement(D.c,null);break;case"Next":r=a+1,c=l.a.createElement(D.d,null);break;case"Last":r=t,c=l.a.createElement(D.b,null);break;default:r=e,c=e}return l.a.createElement(O.a.Item,{className:"".concat("..."===e?"disabled":""),active:e===a,key:"algoliaPage-".concat(e),onClick:function(e){e.preventDefault(),n(r)}},c)}))),l.a.createElement(c,null))})),E=(Object(v.a)((function e(a){var t=a.items,n=a.refine,r=a.createURL;return l.a.createElement("ul",null,t.map((function(a){return l.a.createElement("li",{key:a.label},l.a.createElement("a",{href:r(a.value),style:{fontWeight:a.isRefined?"bold":""},onClick:function(e){e.preventDefault(),n(a.value)},className:"text-decoration-none"},a.label," ",l.a.createElement(S.a,{variant:"warning"},a.count)),a.items&&l.a.createElement(e,{items:a.items,refine:n,createURL:r}))})))})),Object(k.a)((function(e){var a=e.items,t=(e.currentRefinement,e.refine),n=(e.isFromSearch,e.searchForItems,e.createURL,e.label),r=e.isRange,o=e.rangeValue,s=e.rangeUpdate;console.log(s);var i=l.a.createElement("div",{className:"d-flex justify-content-between flex-nowrap"},l.a.createElement(R.a.Control,{type:"range",custom:!0,min:"0",max:"10",step:"1",value:c,onChange:function(e){return s(e.target.value)}}),l.a.createElement("span",null,o)),u=l.a.createElement(l.a.Fragment,null,a.map((function(e){return l.a.createElement(R.a.Check,{type:"checkbox",id:"default-".concat(e.label),key:"checkbox-".concat(e.label),label:l.a.createElement(l.a.Fragment,null,e.label.substring(e.label.lastIndexOf(">")+1),"\xa0\xa0",l.a.createElement(S.a,{variant:"warning"},e.count)),style:{fontWeight:e.isRefined?"bold":""},onClick:function(a){t(e.value)}})})));return l.a.createElement(f.a,{className:"my-2"},l.a.createElement(f.a.Body,null,l.a.createElement(f.a.Text,null,n||""),r?i:u))})));return l.a.createElement(d.a,null,l.a.createElement(p.a,null,l.a.createElement(x.a,{indexName:"cards",searchClient:T},l.a.createElement(d.a,null,l.a.createElement(p.a,{md:"3",className:"pt-5"},l.a.createElement(w.a,{className:"my-2"}),l.a.createElement(E,{attribute:"type.lvl1",label:"Deck"}),l.a.createElement(E,{attribute:"type.lvl0",label:"Card Type"}),l.a.createElement(E,{attribute:"type.lvl2",label:"Ability"}),l.a.createElement(E,{attribute:"race",label:"Race"}),l.a.createElement(E,{attribute:"archetype",label:"Archetype"})),l.a.createElement(p.a,{md:"9"},l.a.createElement(j.a,{hitsPerPage:12}),l.a.createElement(o,{defaultRefinement:new URLSearchParams(a.search).get("q")}),l.a.createElement(u,null),l.a.createElement(m,null))),l.a.createElement(N.a,{className:"justify-content-center"}))))}var L=t(46),A=t.n(L),z=t(64),U=t(70),W=t.n(U);W.a.initializeApp({apiKey:"AIzaSyAaWDAuv9g4tjszrk7j8FjXQWkqi4u_EJA",authDomain:"yugiohdb-app.firebaseapp.com",databaseURL:"https://yugiohdb-app.firebaseio.com",projectId:"yugiohdb-app",storageBucket:"yugiohdb-app.appspot.com",messagingSenderId:"742465348899",appId:"1:742465348899:web:bc22903273dd706ccb1896",measurementId:"G-MDTYD0X896"}),W.a.analytics();var B=W.a,P=t(162);function J(e){var a=e.card,t=function(e){var a,t,n=e.card;n.type&&n.type.includes("Monster")&&(a=l.a.createElement(P.a.Item,null,"ATK: ",n.atk," / DEF: ",n.def),t=l.a.createElement(S.a,{variant:"secondary"},n.race));var r=n.desc.replace("\u25cf","\n\u25cf");return l.a.createElement(P.a,{variant:"flush"},l.a.createElement(P.a.Item,null,l.a.createElement("div",{className:"d-flex justify-content-between"},l.a.createElement("div",null,function(e){var a="",t="";switch(e){case"Effect Monster":a="orange",t="white";break;case"Trap Card":a="#af3568",t="white";break;case"Spell Card":a="#3edf80",t="white"}return l.a.createElement(S.a,{variant:"secondary",style:{backgroundColor:a,color:t}},e)}(n.type)," / ID: ",n.id),l.a.createElement("div",null,l.a.createElement(S.a,{variant:"secondary"},n.attribute)," ",t))),a,l.a.createElement(P.a.Item,{style:{whiteSpace:"pre-line"}},r),l.a.createElement(P.a.Item,null,l.a.createElement("p",null,"Type: ",n.type),l.a.createElement("p",null,"Race: ",n.race),l.a.createElement("p",null,"Archetype: ",n.archetype)))};return l.a.createElement("div",{className:"position-relative"},l.a.createElement("h2",{className:"text-center h4"},a.name),Object.keys(a).length?l.a.createElement(t,{card:a}):l.a.createElement("h5",null,"Invalid Id"))}var V=t(151),q=function(){return l.a.createElement("div",{className:"text-center my-3"},l.a.createElement(V.a,{animation:"border",role:"status",variant:"warning"},l.a.createElement("span",{className:"sr-only"},"Loading...")))},M=t(152);function _(e){var a=e.cardId,t=l.a.useState(""),n=Object(s.a)(t,2),r=n[0],c=n[1],o=l.a.useState(!1),i=Object(s.a)(o,2),u=i[0],m=i[1],d=l.a.useState(!1),p=Object(s.a)(d,2),f=p[0],E=p[1],b=B.functions().httpsCallable("verifyImgExists");return l.a.useEffect((function(){if(a&&!1===u){function e(){return(e=Object(z.a)(A.a.mark((function e(){var t,n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b({cardId:a});case 3:if(!(t=e.sent).data.Data.exists||500===t.data.Status){e.next=9;break}return e.next=7,B.storage().ref("cards/".concat(a,".jpg")).getDownloadURL();case 7:n=e.sent,c(n);case 9:e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0),c("https://sportzor.com/images/ygo_cardback_sleeves19.jpg");case 15:E(!0);case 16:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),m(!0)}}),[a,r,u,b]),l.a.createElement(l.a.Fragment,null,f?l.a.createElement(M.a,{src:r,className:"w-75"}):l.a.createElement(q,null))}var H=B.firestore();function X(){var e=l.a.useState({}),a=Object(s.a)(e,2),t=a[0],n=a[1],r=l.a.useState(!1),c=Object(s.a)(r,2),o=c[0],i=c[1],m=Object(u.g)().id;return l.a.useEffect((function(){(function(){var e=Object(z.a)(A.a.mark((function e(){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Querying..."),e.next=3,H.collection("cards").where("id","==",parseInt(m,10)).get();case 3:(a=e.sent).size?(n(a.docs[0].data()),i(!0)):window.location.replace("/".concat(window.location.pathname.split("/")[1],"/404"));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[m]),l.a.createElement(d.a,null,l.a.createElement(p.a,{className:"text-center mb-2 mb-md-0"},l.a.createElement(_,{cardId:o?t.card_images[0].id:""})),l.a.createElement(p.a,{md:"8",lg:"5"},o?l.a.createElement(J,{card:t}):l.a.createElement(q,null)),l.a.createElement(p.a,{md:"12",lg:"3",className:"text-center py-3"},l.a.createElement("h5",null,"Card Stats")))}var G=t(154),K=t(99),Q=t.n(K);function Y(){var e=Object(u.f)(),a=l.a.useState(""),t=Object(s.a)(a,2),n=t[0],r=t[1];return l.a.createElement(G.a,{expand:"lg",className:"rounded shadow-lg justify-content-between",variant:"dark",bg:"dark"},l.a.createElement(i.b,{to:"/",className:"navbar-brand d-block mx-auto"},l.a.createElement(M.a,{src:Q.a,alt:"Yu-Gi-Oh! Card Search",fluid:!0,style:{maxHeight:"4rem"}})),l.a.createElement(R.a,{onSubmit:function(a){a.preventDefault(),e.push("/search?q=".concat(n))},className:"w-100 d-flex justify-content-center justify-content-lg-end align-items-center"},l.a.createElement(C.a,{type:"text",className:"w-50 mr-2",placeholder:"Search",onChange:function(e){r(e.target.value)},style:{maxWidth:"200px"}}),l.a.createElement(i.b,{to:"/search/?q=".concat(n),className:"btn btn-outline-warning"},"SEARCH")))}var $=t(159);function Z(){var e=function(){return null};return l.a.createElement(G.a,{bg:"dark",variant:"dark",className:"text-white"},l.a.createElement($.a,{className:"mr-auto"},l.a.createElement("small",{className:"d-block mb-3"},"\xa9 2020")),l.a.createElement(e,null))}function ee(e){var a=e.recentCards,t=e.selectThisCard;return l.a.createElement(l.a.Fragment,null,l.a.createElement("h5",null,"Recently Viewed Cards"),l.a.createElement(I.a,{className:"row flex-nowrap",style:{overflow:"scroll"}},a?a.map((function(e){return function(e){return l.a.createElement(f.a,{key:"recent-"+e.objectID,className:"mb-2 shadow-sm ml-2",style:{minWidth:"200px"}},l.a.createElement("div",{style:{height:"200px",backgroundImage:"url(".concat(e.imageURLs.full,"), url('https://storage.cloud.google.com/yugiohdb-app.appspot.com/cards/default.jpg')"),backgroundRepeat:"none",backgroundSize:"cover"}}),l.a.createElement(f.a.ImgOverlay,{className:"py-1 text-white",style:{backgroundColor:"rgba(0,0,0,0.5)",height:"2rem",top:"168px"}},l.a.createElement("div",null,"number"===typeof e.atk&&"number"===typeof e.def?l.a.createElement("p",null,e.atk,"/",e.def):l.a.createElement("p",null,e.race))),l.a.createElement(f.a.Body,null,l.a.createElement(f.a.Title,null,l.a.createElement(i.b,{to:"/card/".concat(e.objectID),onClick:function(){return t(e)}},e.name))))}(e)})):l.a.createElement(f.a,null,l.a.createElement(f.a.Body,null,l.a.createElement(f.a.Text,{className:"text-center text-muted"},"No Recently Viewed Cards")))))}var ae=t(101),te=t(102),ne=t(103),le=t(105),re=function(e){Object(le.a)(t,e);var a=Object(ne.a)(t);function t(){return Object(ae.a)(this,t),a.apply(this,arguments)}return Object(te.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"text-center"},l.a.createElement("h1",null,"404"),l.a.createElement("h5",null,"Not Found"))}}]),t}(n.Component);var ce=function(){var e=l.a.useState({}),a=Object(s.a)(e,2),t=a[0],n=a[1],r=l.a.useState(JSON.parse(localStorage.getItem("recentlyViewed"))||[]),c=Object(s.a)(r,2),E=c[0],b=c[1],g=function(e){console.log("Select card...",e),localStorage.setItem("selectedCard",JSON.stringify(e)),n(e);var a=[e].concat(Object(o.a)(E.filter((function(a){return!(!e||!a)&&a.objectID!==e.objectID}))));b(a.slice(0,6)),localStorage.setItem("recentlyViewed",JSON.stringify(a))};return l.a.createElement(i.a,null,l.a.createElement(m.a,{className:"mb-3",style:{minHeight:"calc(100vh - 83px)"}},l.a.createElement(d.a,null,l.a.createElement(p.a,{className:"py-3"},l.a.createElement(Y,null))),l.a.createElement(f.a,{className:"shadow-lg"},l.a.createElement(f.a.Body,null,l.a.createElement(u.c,null,l.a.createElement(u.a,{path:"/search",render:function(e){return l.a.createElement(F,Object.assign({},e,{selectThisCard:function(e){return g(e)}}))}}),l.a.createElement(u.a,{path:"/card/:id",render:function(e){return l.a.createElement(X,Object.assign({},e,{selectThisCard:function(e){return g(e)},card:t}))}}),l.a.createElement(u.a,{path:"/404",component:re}),l.a.createElement(u.a,{path:"/"},l.a.createElement(ee,{recentCards:E,selectThisCard:function(e){return g(e)}})))))),l.a.createElement(Z,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(ce,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},99:function(e,a,t){e.exports=t.p+"static/media/yugioh-logo.d8b3cab0.png"}},[[106,1,2]]]);
//# sourceMappingURL=main.5a65f82d.chunk.js.map